<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Brain Made of Squares</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 20px;
        background: #f8fafc;
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        text-align: center;
      }
      h1 {
        color: #1e293b;
        margin-bottom: 10px;
      }
      p {
        color: #64748b;
        margin-bottom: 20px;
      }
      #sketch-container {
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        background: white;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Brain Made of Squares</h1>
      <p>Watch as squares arrange themselves to form a brain shape</p>
      <div id="sketch-container"></div>
    </div>

    <script>
      let brainSquares = []
      let time = 0
      let animationPhase = 0 // 0: forming, 1: pulsing, 2: neural activity

      function setup() {
        const canvas = createCanvas(600, 500)
        canvas.parent('sketch-container')
        textAlign(CENTER, CENTER)

        // Create brain shape using squares
        createBrainShape()
      }

      function createBrainShape() {
        // Brain shape coordinates - More organic, realistic brain shape
        const brainShape = [
          // Frontal lobe - more rounded and organic
          [-100, -30],
          [-95, -40],
          [-90, -50],
          [-85, -60],
          [-80, -70],
          [-75, -80],
          [-70, -90],
          [-65, -100],
          [-60, -110],
          [-55, -120],
          [-50, -130],
          [-45, -140],
          [-40, -150],
          [-35, -160],
          [-30, -170],
          [-25, -180],
          [-20, -190],
          [-15, -200],
          [-10, -210],
          [-5, -220],
          [0, -230],
          [5, -220],
          [10, -210],
          [15, -200],
          [20, -190],
          [25, -180],
          [30, -170],
          [35, -160],
          [40, -150],
          [45, -140],
          [50, -130],
          [55, -120],
          [60, -110],
          [65, -100],
          [70, -90],
          [75, -80],
          [80, -70],
          [85, -60],
          [90, -50],
          [95, -40],
          [100, -30],

          // Top curve - more rounded, less pointy
          [95, -20],
          [90, -10],
          [85, 0],
          [80, 10],
          [75, 20],
          [70, 30],
          [65, 40],
          [60, 50],
          [55, 60],
          [50, 70],
          [45, 80],
          [40, 90],
          [35, 100],
          [30, 110],
          [25, 120],
          [20, 130],
          [15, 140],
          [10, 150],
          [5, 160],
          [0, 170],
          [-5, 160],
          [-10, 150],
          [-15, 140],
          [-20, 130],
          [-25, 120],
          [-30, 110],
          [-35, 100],
          [-40, 90],
          [-45, 80],
          [-50, 70],
          [-55, 60],
          [-60, 50],
          [-65, 40],
          [-70, 30],
          [-75, 20],
          [-80, 10],
          [-85, 0],
          [-90, -10],
          [-95, -20],
          [-100, -30],

          // Bottom curve - temporal lobe area
          [-95, -20],
          [-90, -10],
          [-85, 0],
          [-80, 10],
          [-75, 20],
          [-70, 30],
          [-65, 40],
          [-60, 50],
          [-55, 60],
          [-50, 70],
          [-45, 80],
          [-40, 90],
          [-35, 100],
          [-30, 110],
          [-25, 120],
          [-20, 130],
          [-15, 140],
          [-10, 150],
          [-5, 160],
          [0, 170],
          [5, 160],
          [10, 150],
          [15, 140],
          [20, 130],
          [25, 120],
          [30, 110],
          [35, 100],
          [40, 90],
          [45, 80],
          [50, 70],
          [55, 60],
          [60, 50],
          [65, 40],
          [70, 30],
          [75, 20],
          [80, 10],
          [85, 0],
          [90, -10],
          [95, -20],
          [100, -30],

          // Cerebellum - smaller, more compact
          [25, 120],
          [30, 130],
          [35, 140],
          [40, 150],
          [45, 160],
          [50, 170],
          [55, 180],
          [60, 190],
          [65, 200],
          [70, 210],
          [75, 220],
          [80, 230],
          [85, 240],
          [80, 250],
          [75, 260],
          [70, 270],
          [65, 280],
          [60, 290],
          [55, 300],
          [50, 310],
          [45, 320],
          [40, 330],
          [35, 340],
          [30, 350],
          [25, 360],
          [20, 370],
          [15, 380],
          [10, 390],
          [5, 400],
          [0, 410],
          [-5, 400],
          [-10, 390],
          [-15, 380],
          [-20, 370],
          [-25, 360],
          [-30, 350],
          [-35, 340],
          [-40, 330],
          [-45, 320],
          [-50, 310],
          [-55, 300],
          [-60, 290],
          [-65, 280],
          [-70, 270],
          [-75, 260],
          [-80, 250],
          [-85, 240],
          [-80, 230],
          [-75, 220],
          [-70, 210],
          [-65, 200],
          [-60, 190],
          [-55, 180],
          [-50, 170],
          [-45, 160],
          [-40, 150],
          [-35, 140],
          [-30, 130],
          [-25, 120],

          // Brainstem - small and compact
          [-15, 380],
          [-10, 390],
          [-5, 400],
          [0, 410],
          [5, 420],
          [10, 430],
          [15, 440],
          [20, 450],
          [25, 460],
          [30, 470],
          [35, 480],
          [30, 490],
          [25, 500],
          [20, 510],
          [15, 520],
          [10, 530],
          [5, 540],
          [0, 550],
          [-5, 540],
          [-10, 530],
          [-15, 520],
          [-20, 510],
          [-25, 500],
          [-30, 490],
          [-25, 480],
          [-20, 470],
          [-15, 460],
          [-10, 450],
          [-5, 440],
          [0, 430],

          // Additional organic curves for more realistic shape
          [-105, -20],
          [-110, -10],
          [-115, 0],
          [-120, 10],
          [-125, 20],
          [-130, 30],
          [-135, 40],
          [-140, 50],
          [-145, 60],
          [-150, 70],
          [-155, 80],
          [-160, 90],
          [-155, 100],
          [-150, 110],
          [-145, 120],
          [-140, 130],
          [-135, 140],
          [-130, 150],
          [-125, 160],
          [-120, 170],
          [-115, 180],
          [-110, 190],
          [-105, 200],
          [-100, 210],
          [-95, 220],
          [-90, 230],
          [-85, 240],
          [-80, 250],
          [-75, 260],
          [-70, 270],
          [-65, 280],
          [-60, 290],
          [-55, 300],
          [-50, 310],
          [-45, 320],
          [-40, 330],
          [-35, 340],
          [-30, 350],
          [-25, 360],
          [-20, 370],
          [-15, 380],

          // Right side organic curves
          [105, -20],
          [110, -10],
          [115, 0],
          [120, 10],
          [125, 20],
          [130, 30],
          [135, 40],
          [140, 50],
          [145, 60],
          [150, 70],
          [155, 80],
          [160, 90],
          [155, 100],
          [150, 110],
          [145, 120],
          [140, 130],
          [135, 140],
          [130, 150],
          [125, 160],
          [120, 170],
          [115, 180],
          [110, 190],
          [105, 200],
          [100, 210],
          [95, 220],
          [90, 230],
          [85, 240],
          [80, 250],
          [75, 260],
          [70, 270],
          [65, 280],
          [60, 290],
          [55, 300],
          [50, 310],
          [45, 320],
          [40, 330],
          [35, 340],
          [30, 350],
          [25, 360],
          [20, 370],
          [15, 380],

          // Inner curves for more detail
          [-80, -50],
          [-75, -60],
          [-70, -70],
          [-65, -80],
          [-60, -90],
          [-55, -100],
          [-50, -110],
          [-45, -120],
          [-40, -130],
          [-35, -140],
          [-30, -150],
          [-25, -160],
          [-20, -170],
          [-15, -180],
          [-10, -190],
          [-5, -200],
          [0, -210],
          [5, -200],
          [10, -190],
          [15, -180],
          [20, -170],
          [25, -160],
          [30, -150],
          [35, -140],
          [40, -130],
          [45, -120],
          [50, -110],
          [55, -100],
          [60, -90],
          [65, -80],
          [70, -70],
          [75, -60],
          [80, -50],
        ]

        // Create squares for each brain position
        brainShape.forEach((pos, index) => {
          brainSquares.push({
            x: width / 2 + pos[0],
            y: height / 2 + pos[1],
            targetX: width / 2 + pos[0],
            targetY: height / 2 + pos[1],
            startX: random(width),
            startY: random(height),
            size: 20,
            color: color(100, 150, 255, 200),
            pulse: random(TWO_PI),
            active: false,
            index: index,
            delay: index * 2,
          })
        })
      }

      function draw() {
        background(255)

        // Draw title
        fill(30)
        textSize(18)
        text('Brain Made of Squares', width / 2, 30)

        // Update animation phase
        if (animationPhase === 0 && frameCount > 200) {
          animationPhase = 1
        }
        if (animationPhase === 1 && frameCount > 400) {
          animationPhase = 2
        }

        // Draw brain squares
        drawBrainSquares()

        // Draw phase indicator
        drawPhaseIndicator()

        time += 0.02
      }

      function drawBrainSquares() {
        brainSquares.forEach((square, index) => {
          // Animation phase 0: Forming
          if (animationPhase === 0) {
            if (frameCount > square.delay) {
              square.x += (square.targetX - square.x) * 0.1
              square.y += (square.targetY - square.y) * 0.1
            }
          }

          // Animation phase 1: Pulsing
          if (animationPhase >= 1) {
            square.pulse += 0.1
            let pulseSize = sin(square.pulse) * 2
            square.size = 20 + pulseSize
          }

          // Animation phase 2: Neural activity
          if (animationPhase === 2) {
            if (random(1) < 0.01) {
              square.active = true
              square.color = color(255, 100, 100, 255)
            }
            if (square.active) {
              square.color = lerpColor(
                square.color,
                color(100, 150, 255, 200),
                0.1,
              )
              if (square.color.levels[3] < 210) {
                square.active = false
              }
            }
          }

          // Draw square
          fill(square.color)
          stroke(50, 100, 200)
          strokeWeight(1)
          rect(
            square.x - square.size / 2,
            square.y - square.size / 2,
            square.size,
            square.size,
            3,
          )

          // Draw neural connections in phase 2
          if (animationPhase === 2 && square.active) {
            drawNeuralConnections(square, index)
          }
        })
      }

      function drawNeuralConnections(activeSquare, activeIndex) {
        stroke(255, 100, 100, 150)
        strokeWeight(2)

        // Connect to nearby squares
        brainSquares.forEach((otherSquare, otherIndex) => {
          if (otherIndex !== activeIndex) {
            let distance = dist(
              activeSquare.x,
              activeSquare.y,
              otherSquare.x,
              otherSquare.y,
            )
            if (distance < 60 && distance > 20) {
              line(activeSquare.x, activeSquare.y, otherSquare.x, otherSquare.y)
            }
          }
        })
      }

      function drawPhaseIndicator() {
        fill(100)
        noStroke()
        textSize(14)

        let phaseText = ''
        if (animationPhase === 0) {
          phaseText = 'Phase 1: Forming Brain Shape'
        } else if (animationPhase === 1) {
          phaseText = 'Phase 2: Brain Activity (Pulsing)'
        } else {
          phaseText = 'Phase 3: Neural Network Activity'
        }

        text(phaseText, width / 2, height - 30)

        // Progress bar
        let progress = min(frameCount / 600, 1)
        let barWidth = 200
        let barHeight = 8
        let barX = width / 2 - barWidth / 2
        let barY = height - 15

        // Background
        fill(240)
        stroke(200)
        strokeWeight(1)
        rect(barX, barY, barWidth, barHeight, 4)

        // Progress
        fill(100, 150, 255)
        noStroke()
        rect(barX, barY, barWidth * progress, barHeight, 4)
      }

      function mousePressed() {
        // Reset animation
        animationPhase = 0
        frameCount = 0
        brainSquares.forEach((square) => {
          square.x = square.startX
          square.y = square.startY
          square.color = color(100, 150, 255, 200)
          square.active = false
        })
      }
    </script>
  </body>
</html>
